<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <title>Trading Cards AR</title>

    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>

    <script>
      AFRAME.registerComponent('look-at-camera', {
        tick: function () {
          const cam = this.el.sceneEl.camera;
          if (cam) this.el.object3D.lookAt(cam.position);
        }
      });

      AFRAME.registerComponent("rotate-on-touch", {
        schema: { speed: { type: "number", default: 1 } },

        init: function () {
          this.rotating = false;

          // Mobile touch start
          window.addEventListener("touchstart", () => {
            this.rotating = true;
          });

          // Mobile touch end
          window.addEventListener("touchend", () => {
            this.rotating = false;
          });

          // Mouse click (PC)
          window.addEventListener("mousedown", () => {
            this.rotating = true;
          });

          window.addEventListener("mouseup", () => {
            this.rotating = false;
          });
        },

        tick: function () {
          if (!this.rotating) return;

          const rot = this.el.getAttribute("rotation");
          rot.y += this.data.speed;
          this.el.setAttribute("rotation", rot);
        }
      });
    </script>

    <style>
      body { margin: 0; overflow: hidden; }
    </style>
  </head>

  <body>
    <a-scene embedded arjs="debugUIEnabled: false">

      <a-marker id="charA" type="pattern" url="markers/charA_marker.patt">

        <a-entity id="model1" visible="false" scale="0.5 0.5 0.5" rotate-on-touch="speed: 2"></a-entity>

        <a-text 
          id="stats1"
          value=""
          color="#FFF"
          align="center"
          position="0 1.5 0.01"
          scale="0.55 0.55 0.55"
          visible="false"
          look-at-camera
          shader="msdf"
          alpha-test="0.5">
        </a-text>

      </a-marker>

      <a-marker id="littleM" type="pattern" url="markers/littleM_marker.patt">

        <a-entity id="model2" visible="false" scale="0.1 0.1 0.1" rotate-on-touch="speed: 2"></a-entity>

        <a-text 
          id="stats2"
          value=""
          color="#FFF"
          align="center"
          position="0 1.3 0.01"
          scale="0.55 0.55 0.55"
          visible="false"
          look-at-camera
          shader="msdf"
          alpha-test="0.5">
        </a-text>

      </a-marker>

      <a-marker id="sus" type="pattern" url="markers/sus_marker.patt">

        <a-entity id="model3" visible="false" sacle="2 2 2" rotate-on-touch="speed: 2"></a-entity>

        <a-text 
          id="stats3"
          value=""
          color="#FFF"
          align="center"
          position="0 1.3 0.01"
          scale="0.55 0.55 0.55"
          visible="false"
          look-at-camera
          shader="msdf"
          alpha-test="0.5">
        </a-text>

      </a-marker>

      <a-entity camera></a-entity>

    </a-scene>

    <script src="script.js"></script>
  </body>
</html>
